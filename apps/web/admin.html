<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin</title>
  <style>
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#f7f7f9; color:#111; }
    .wrap { max-width: 1100px; margin: 22px auto; padding: 0 14px; }
    .card { background:#fff; border:1px solid rgba(0,0,0,0.14); border-radius:14px; padding:14px; margin: 14px 0; }
    .row { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    button {
      border:1px solid rgba(0,0,0,0.22);
      background:#fff;
      color:#111;
      border-radius:999px;
      padding:10px 14px;
      font-size:13px;
      cursor:pointer;
    }
    button.primary {
      background:#111;
      color:#fff;
      border-color:#111;
    }
    input, textarea, select {
      border:1px solid rgba(0,0,0,0.22);
      border-radius:12px;
      padding:10px 10px;
      font-size:13px;
      background:#fff;
      color:#111;
      box-sizing:border-box;
      width: 100%;
    }
    textarea { min-height: 84px; resize: vertical; }
    .hint { color: rgba(0,0,0,0.62); font-size: 12px; margin-top: 6px; }
    .err { color: #b00020; font-size: 12px; margin-top: 6px; display:none; }

    /* Modal */
    .af-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 99999;
      padding: 16px;
    }
    .af-modal {
      width: min(900px, 100%);
      max-height: 85vh;
      overflow: auto;
      background: #fff;
      border: 1px solid rgba(0,0,0,0.20);
      border-radius: 12px;
      padding: 12px;
      box-sizing: border-box;
    }
    .af-modal-title { font-size: 15px; font-weight: 800; margin: 4px 0 12px; }
    .af-grid { display:grid; gap:10px; grid-template-columns: 1fr; }
    .af-actions { display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap; margin-top: 12px; }
    .af-row2 { display:grid; gap:10px; grid-template-columns: 1fr 1fr; }
    @media (max-width: 720px){ .af-row2 { grid-template-columns: 1fr; } }

    .af-pill { display:inline-flex; padding:6px 10px; border-radius:999px; border:1px solid rgba(0,0,0,0.18); background:#fff; font-size:12px; }
    .af-list { border:1px solid rgba(0,0,0,0.18); border-radius:12px; padding:8px; max-height:240px; overflow:auto; background:#fff; }
    .af-list button { width:100%; text-align:left; border-radius:10px; margin:4px 0; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h2 style="margin:0 0 10px;">Admin</h2>
      <div class="row">
        <!-- 这些按钮的 id/文本请保持你现有 admin.js 能识别即可；如果你的 JS 绑定的是别的 id，你再告诉我我就对齐 -->
        <button id="btnAddOrg" type="button">添加企业/机构</button>
        <button id="btnEditDomain" type="button">编辑安全领域</button>
        <button id="btnEditProduct" type="button">编辑安全产品</button>
        <button id="btnEditOrgProduct" type="button">编辑企业产品</button>
      </div>
      <div class="hint">如果按钮仍点不开：说明你的 admin.js 绑定的按钮 id 不同，把 admin.js 里绑定按钮的那几行贴我，我会对齐。</div>
    </div>

    <div class="card">
      <div class="hint">调试：</div>
      <pre id="adminDebug" style="white-space:pre-wrap;word-break:break-word;margin:0;"></pre>
    </div>
  </div>

  <!-- =========================
       Domain Modal (编辑安全领域)
       ========================= -->
  <div class="af-modal-overlay" id="domainModal">
    <div class="af-modal">
      <div class="af-modal-title">编辑安全领域</div>

      <div class="af-grid">
        <div class="af-row2">
          <div>
            <div class="hint">安全领域名</div>
            <input id="domainName" />
            <div class="err" id="domainNameErr"></div>
          </div>
          <div>
            <div class="hint">slug</div>
            <input id="domainSlug" />
            <div class="err" id="domainSlugErr"></div>
          </div>
        </div>

        <div>
          <div class="hint">描述</div>
          <textarea id="domainDesc"></textarea>
          <div class="err" id="domainDescErr"></div>
        </div>

        <div class="af-row2">
          <div>
            <label class="hint"><input id="domainIsAlias" type="checkbox" /> 这是 alias（别名）</label>
            <div class="err" id="domainIsAliasErr"></div>
          </div>
          <div>
            <div class="hint">alias 指向目标（可选）</div>
            <div class="row" style="margin-top:6px;">
              <span class="af-pill" id="domainAliasTargetPicked">(none)</span>
              <button id="domainAliasTargetClear" type="button">清除</button>
            </div>
            <input id="domainAliasTargetSearch" placeholder="搜索目标领域…" />
            <div class="hint" id="domainAliasTargetStatus"></div>
            <div class="af-list" id="domainAliasTargetList"></div>
            <div class="err" id="domainAliasTargetErr"></div>
          </div>
        </div>

        <div class="af-actions">
          <button id="domainClose" type="button">关闭</button>
          <button id="domainReset" type="button">重置</button>
          <button id="domainSubmit" class="primary" type="button">提交</button>
        </div>
      </div>
    </div>
  </div>

  <!-- =========================
       Product Modal (编辑安全产品 / 添加安全产品)
       这些 id 是你日志里缺失的关键节点
       ========================= -->
  <div class="af-modal-overlay" id="productModal">
    <div class="af-modal">
      <div class="af-modal-title">编辑安全产品</div>

      <div class="af-grid">
        <div>
          <div class="hint">产品名称</div>
          <input id="productName" />
          <div class="err" id="productNameErr"></div>
        </div>

        <div class="af-row2">
          <div>
            <label class="hint"><input id="productIsAlias" type="checkbox" /> 这是 alias（别名）</label>
            <div class="err" id="productIsAliasErr"></div>
          </div>

          <!-- slug 行：JS 里经常会根据 alias 勾选来 show/hide -->
          <div id="productSlugRow">
            <div class="hint">slug</div>
            <input id="productSlug" />
            <div class="err" id="productSlugErr"></div>
          </div>
        </div>

        <div id="productDomainsRow">
          <div class="hint">所属安全领域（可多选/单选由 JS 控制）</div>
          <div id="productDomains"></div>
          <div class="err" id="productDomainsErr"></div>
        </div>

        <div id="productDescRow">
          <div class="hint">描述</div>
          <textarea id="productDesc"></textarea>
        </div>

        <div id="productAliasTargetRow">
          <div class="hint">alias 指向目标产品</div>
          <div class="row" style="margin-top:6px;">
            <span class="af-pill" id="productAliasTargetPicked">(none)</span>
            <button id="productAliasTargetClear" type="button">清除</button>
          </div>

          <input id="productAliasTargetSearch" placeholder="搜索目标产品…" />
          <div class="hint" id="productAliasTargetStatus"></div>
          <div class="af-list" id="productAliasTargetList"></div>
          <div class="err" id="productAliasTargetErr"></div>
        </div>

        <div class="af-actions">
          <button id="productClose" type="button">关闭</button>
          <button id="productReset" type="button">重置</button>
          <button id="productSubmit" class="primary" type="button">提交</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 你项目里 admin 的入口脚本（保持原样，Vite 会替换成 hash bundle） -->
  <script type="module" src="/src/admin.js"></script>
</body>
</html>
